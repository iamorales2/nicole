<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Little Comfort Just For You</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font import */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Hide scrollbar during animation */
        }

        /* Flower animation styles */
        .flower-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* Changed background to shades of wine red */
            background: linear-gradient(to bottom right, #800020, #A52A2A); /* Deep Wine Red to Brownish Red */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000; /* Ensure it's on top */
            opacity: 1;
            transition: opacity 1s ease-out; /* Fade out transition */
        }

        .flower {
            position: relative;
            width: 80px; /* Base size */
            height: 80px;
            animation: bloom 3s forwards ease-out; /* Bloom animation */
        }

        .petal {
            position: absolute;
            width: 40px; /* Petal size */
            height: 60px;
            border-radius: 50% 50% 0 0; /* Rounded top */
            transform-origin: bottom center;
            opacity: 0; /* Start hidden */
            /* Adjusted top and left to center the petal's origin within the flower div */
            top: -20px; /* (flower height / 2) - (petal height / 2) = 40 - 30 = 10. But origin is bottom, so it's (flower height / 2) - petal height = 40 - 60 = -20 */
            left: 20px; /* (flower width / 2) - (petal width / 2) = 40 - 20 = 20 */
            animation: growPetal 2s forwards ease-out; /* Petal growth animation */
        }

        /* Shades of blue for forget-me-not petals (retained as per previous request) */
        .petal:nth-child(1) { transform: rotate(0deg); animation-delay: 0.5s; background-color: #BBDEFB; } /* Lightest Blue */
        .petal:nth-child(2) { transform: rotate(45deg); animation-delay: 0.6s; background-color: #90CAF9; }
        .petal:nth-child(3) { transform: rotate(90deg); animation-delay: 0.7s; background-color: #64B5F6; }
        .petal:nth-child(4) { transform: rotate(135deg); animation-delay: 0.8s; background-color: #42A5F5; }
        .petal:nth-child(5) { transform: rotate(180deg); animation-delay: 0.9s; background-color: #2196F3; } /* Medium Blue */
        .petal:nth-child(6) { transform: rotate(225deg); animation-delay: 1.0s; background-color: #1E88E5; }
        .petal:nth-child(7) { transform: rotate(270deg); animation-delay: 1.1s; background-color: #1976D2; }
        .petal:nth-child(8) { transform: rotate(315deg); animation-delay: 1.2s; background-color: #1565C0; } /* Darkest Blue */

        .center {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #ffeb3b; /* Yellow center */
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            animation: growCenter 1.5s forwards ease-out 1.5s; /* Center growth animation */
        }

        /* Keyframe animations */
        @keyframes bloom {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes growPetal {
            0% { transform: scale(0) rotate(var(--rotation)); opacity: 0; }
            100% { transform: scale(1) rotate(var(--rotation)); opacity: 1; }
        }

        @keyframes growCenter {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        /* Hide main content initially */
        .main-content {
            display: none;
        }

        /* Teddy Bear Wobble Animation */
        @keyframes wobble {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
        }

        .teddy-wobble {
            animation: wobble 0.5s ease-in-out;
        }

        /* Teddy Bear Message Fade Out */
        @keyframes fadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        .teddy-message-fade-out {
            animation: fadeOut 2s forwards; /* Adjust duration as needed */
            animation-delay: 3s; /* Start fading after 3 seconds */
        }

        /* Floating Icon Animation Styles (Clovers and Stars) */
        .floating-icon {
            position: absolute;
            font-size: 1.2rem;
            opacity: 0;
            animation: floatIcon 2s ease-out forwards;
            pointer-events: none;
            z-index: 10;
        }

        @keyframes floatIcon {
            0% { opacity: 0; transform: translateY(0) scale(0.5); }
            20% { opacity: 1; transform: translateY(-20px) scale(1); }
            80% { opacity: 1; transform: translateY(-80px) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(0.5); }
        }

        /* Music control button styling */
        #musicControlBtn {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            padding: 0.5rem;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1001; /* Above everything else */
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-200 via-pink-200 to-blue-200 p-4 sm:p-6">

    <button id="musicControlBtn" class="flex items-center justify-center w-10 h-10 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-300">
        <svg id="playIcon" class="w-6 h-6 text-gray-700" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
        </svg>
        <svg id="pauseIcon" class="w-6 h-6 text-gray-700 hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path>
        </svg>
    </button>

    <audio id="backgroundMusic" loop>
        <source src="Ben&Ben - Godsent (Lyric Video) - 128.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div id="flowerAnimation" class="flower-container">
        <div class="flower">
            <div class="petal" style="--rotation: 0deg;"></div>
            <div class="petal" style="--rotation: 45deg;"></div>
            <div class="petal" style="--rotation: 90deg;"></div>
            <div class="petal" style="--rotation: 135deg;"></div>
            <div class="petal" style="--rotation: 180deg;"></div>
            <div class="petal" style="--rotation: 225deg;"></div>
            <div class="petal" style="--rotation: 270deg;"></div>
            <div class="petal" style="--rotation: 315deg;"></div>
            <div class="center"></div>
        </div>
    </div>

    <div id="mainContent" class="main-content bg-white p-8 sm:p-10 rounded-3xl shadow-2xl max-w-lg w-full text-center transform transition-transform duration-300 hover:scale-105 hover:ring-4 hover:ring-purple-400/50 flex flex-col items-center justify-center relative">
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-6 leading-tight">
            For you, Nicole! 
        </h1>
        <p id="comfortMessage" class="text-lg sm:text-xl text-gray-700 mb-8 italic">
            "Thinking of you and sending a big virtual hug. You're stronger than you think."
        </p>
        <button
            id="nextMessageBtn"
            class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-purple-300"
        >
            Send Another Hug
        </button>
        <p class="mt-8 text-gray-500 text-sm">
            You got this, and I'm here for you!
        </p>
        <div id="floatingHeartsContainer" class="absolute inset-0 pointer-events-none overflow-hidden"></div>

        <div class="mt-8 pt-6 border-t-2 border-gray-100 flex flex-col items-center">
            <p id="teddyBearMessage" class="text-md text-gray-600 mb-4 italic opacity-0">
                </p>
            <div id="teddyBear" class="cursor-pointer transform transition-transform duration-150 active:scale-95">
                <svg width="80" height="80" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="40" fill="#A0522D"/> <circle cx="25" cy="25" r="15" fill="#A0522D"/>
                    <circle cx="75" cy="25" r="15" fill="#A0522D"/>
                    <circle cx="25" cy="25" r="8" fill="#D2B48C"/> <circle cx="75" cy="25" r="8" fill="#D2B48C"/>
                    <ellipse cx="50" cy="60" rx="20" ry="15" fill="#D2B48C"/>
                    <circle cx="50" cy="55" r="5" fill="#000000"/>
                    <circle cx="40" cy="45" r="4" fill="#000000"/>
                    <circle cx="60" cy="45" r="4" fill="#000000"/>
                    <path d="M40 65 Q50 70 60 65" stroke="#000000" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <p class="text-gray-500 text-xs mt-2">Click the bear for a special message!</p>
        </div>
    </div>

    <script>
        // Array of comforting messages for the main button
        const comfortingMessages = [
            "Thinking of you and sending a big virtual hug. You're stronger than you think.",
            "No matter what worries you're carrying, remember you're not alone. I'm here for you.",
            "Take a deep breath. You're doing great, and everything will be okay.",
            "Just wanted to remind you how amazing and resilient you are. You've got this!",
            "Sending you peace and calm. Let your worries float away, even just for a moment.",
            "You are loved, valued, and incredibly capable. Don't forget that.",
            "May your day be filled with small joys and quiet moments of peace.",
            "Remember that even the toughest storms eventually pass. Hold on tight.",
            "Your happiness means the world to me. I hope this brings a little smile to your face.",
            "Just a little reminder that I'm always in your corner, cheering you on.",
            // Affirmations for research defense
            "You've worked incredibly hard on your research. Trust in your knowledge and preparation.",
            "Your research is valuable, and your insights are important. Speak with confidence.",
            "You are well-prepared and articulate. You will present your findings brilliantly.",
            "Believe in yourself and the amazing work you've done. You've got this defense!",
            "Take a deep breath. You know your research inside and out. You're ready.",
            "Every question is an opportunity to showcase your expertise. You are capable.",
            "You are intelligent, dedicated, and fully equipped for this defense. Shine brightly!",
            "This is your moment to share your passion and knowledge. You will excel.",
            "Remember all the effort you've put in. It will pay off. You are ready for success."
        ];

        // Messages for the teddy bear
        const teddyBearMessages = [
            "Woof! Just wanted to say, you're doing great!",
            "Beary good job today! Keep going!",
            "A little hug from your furry friend!",
            "Don't worry, be hoppy! (Oops, wrong animal!)",
            "You're the best! *Wobble*",
            "Sending you all my bear hugs!",
            "Even bears have bad days, but they always get through them. You will too!",
            "Just a little reminder that you're loved!",
            "You're as sweet as honey! Keep smiling!",
            "I believe in you! *Nods head*"
        ];

        // Emojis for floating animation
        const floatingEmojis = ['ðŸ€', 'â­', 'âœ¨', 'â˜˜ï¸']; // Clovers and stars

        let messageIndex = 0; // Current index for main messages
        let teddyBearMessageIndex = 0; // Current index for teddy bear messages

        // Get elements from the DOM
        const comfortMessageElement = document.getElementById('comfortMessage');
        const nextMessageBtn = document.getElementById('nextMessageBtn');
        const flowerAnimationContainer = document.getElementById('flowerAnimation');
        const mainContent = document.getElementById('mainContent');
        const floatingHeartsContainer = document.getElementById('floatingHeartsContainer');
        const teddyBearElement = document.getElementById('teddyBear'); // Teddy bear SVG container
        const teddyBearMessageElement = document.getElementById('teddyBearMessage'); // Teddy bear's message display
        const backgroundMusic = document.getElementById('backgroundMusic'); // Audio element
        const musicControlBtn = document.getElementById('musicControlBtn'); // Music control button
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');


        // Initialize SpeechSynthesisUtterance and SpeechSynthesis
        const synth = window.speechSynthesis;
        let utterance = new SpeechSynthesisUtterance();
        utterance.lang = 'en-US'; // Set language for better pronunciation

        // Function to select a child-like voice
        function setChildVoice() {
            const voices = synth.getVoices();
            // Try to find a voice that sounds like a child.
            // Voice names can vary by browser/OS, so we look for common keywords.
            let childVoice = voices.find(voice =>
                voice.lang === 'en-US' &&
                (voice.name.includes('Kid') || voice.name.includes('Child') || voice.name.includes('Zira') || voice.name.includes('Junior'))
            );

            // Fallback to a higher pitch if no specific child voice is found
            if (childVoice) {
                utterance.voice = childVoice;
            } else {
                // If no specific child voice, try to adjust pitch for a higher sound
                utterance.pitch = 1.2; // Higher pitch
                utterance.rate = 1.0; // Normal speed
            }
        }

        // Load voices when they are ready (important for getVoices to work)
        synth.onvoiceschanged = setChildVoice;
        // Call it once immediately in case voices are already loaded
        setChildVoice();


        // Function to create and animate a floating icon (clover/star)
        function createFloatingIcon() {
            const icon = document.createElement('span');
            // Randomly select between clover and star emojis
            icon.textContent = floatingEmojis[Math.floor(Math.random() * floatingEmojis.length)];
            icon.classList.add('floating-icon');

            // Randomize starting position within the button's width
            const buttonRect = nextMessageBtn.getBoundingClientRect();
            const startLeft = buttonRect.left + buttonRect.width / 2 - mainContent.getBoundingClientRect().left; // Centered above the button
            const startBottom = mainContent.offsetHeight - (buttonRect.top - mainContent.getBoundingClientRect().top + buttonRect.height / 2); // Start near the button

            icon.style.left = `${startLeft}px`;
            icon.style.bottom = `${startBottom}px`;

            floatingHeartsContainer.appendChild(icon);

            // Remove icon after animation
            icon.addEventListener('animationend', () => {
                icon.remove();
            });
        }

        // Function to display the next main message and trigger animations
        function showNextMessage() {
            messageIndex = (messageIndex + 1) % comfortingMessages.length; // Cycle through messages
            comfortMessageElement.textContent = `"${comfortingMessages[messageIndex]}"`; // Update message text

            // Trigger floating icons animation
            for (let i = 0; i < 3; i++) { // Create 3 icons
                setTimeout(createFloatingIcon, i * 100); // Stagger their appearance
            }
            // Attempt to play music on user interaction
            playBackgroundMusic();
        }

        // Function to show teddy bear message and animation, and speak it
        function showTeddyBearMessage() {
            const currentMessage = teddyBearMessages[teddyBearMessageIndex];

            // Display message
            teddyBearMessageElement.textContent = `"${currentMessage}"`;
            teddyBearMessageElement.classList.remove('opacity-0'); // Make visible
            teddyBearMessageElement.classList.remove('teddy-message-fade-out'); // Remove old fade-out animation
            void teddyBearMessageElement.offsetWidth; // Trigger reflow

            // Add fade out animation after a delay
            setTimeout(() => {
                teddyBearMessageElement.classList.add('teddy-message-fade-out');
            }, 50); // Small delay to ensure animation resets

            // Trigger wobble animation on bear
            teddyBearElement.classList.remove('teddy-wobble'); // Reset animation
            void teddyBearElement.offsetWidth; // Trigger reflow
            teddyBearElement.classList.add('teddy-wobble');

            // Speak the message
            if (synth.speaking) { // If already speaking, stop it
                synth.cancel();
            }
            utterance.text = currentMessage;
            synth.speak(utterance);

            // Cycle to next teddy bear message
            teddyBearMessageIndex = (teddyBearMessageIndex + 1) % teddyBearMessages.length;

            // Attempt to play music on user interaction
            playBackgroundMusic();
        }

        // Function to play background music
        function playBackgroundMusic() {
            // Only attempt to play if it's currently paused
            if (backgroundMusic.paused) {
                backgroundMusic.play().then(() => {
                    // Playback started successfully
                    playIcon.classList.add('hidden');
                    pauseIcon.classList.remove('hidden');
                }).catch(error => {
                    // Autoplay was prevented or other error
                    console.log("Music playback prevented:", error);
                    // Keep the play icon visible if playback failed
                    playIcon.classList.remove('hidden');
                    pauseIcon.classList.add('hidden');
                });
            }
        }

        // Function to toggle music play/pause
        function toggleMusic() {
            if (backgroundMusic.paused) {
                backgroundMusic.play().then(() => {
                    playIcon.classList.add('hidden');
                    pauseIcon.classList.remove('hidden');
                }).catch(error => {
                    console.log("Manual play prevented:", error);
                });
            } else {
                backgroundMusic.pause();
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            }
        }

        // Add event listeners
        nextMessageBtn.addEventListener('click', showNextMessage);
        nextMessageBtn.addEventListener('touchend', showNextMessage); // For touch devices
        teddyBearElement.addEventListener('click', showTeddyBearMessage); // Teddy bear click listener
        teddyBearElement.addEventListener('touchend', showTeddyBearMessage); // Teddy bear touch listener
        musicControlBtn.addEventListener('click', toggleMusic); // Music control button listener


        // Function to hide animation and show main content
        function showMainContent() {
            flowerAnimationContainer.style.opacity = '0'; // Start fade out
            setTimeout(() => {
                flowerAnimationContainer.style.display = 'none'; // Hide after fade
                mainContent.style.display = 'flex'; // Show main content
                document.body.style.overflow = 'auto'; // Re-enable scrolling if needed
            }, 1000); // Matches the CSS transition duration
        }

        // Automatically hide animation and show content after a delay
        // The animation itself takes about 3 seconds, plus a little buffer
        window.onload = function() {
            setTimeout(showMainContent, 3500); // Adjust this delay as needed for animation duration
        };

    </script>
</body>
</html>
